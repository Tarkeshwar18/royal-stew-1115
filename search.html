<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search</title>
    <link rel="stylesheet" href="search.css" class="css">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300&family=Mulish:wght@700&family=Poppins:wght@100;200&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
</head>
<body>
    <div class="navbar">
        <div class="logo">
          <a href="">
            <img
              src="./images/daily-mart-logo (1).png"
              alt=""
            />
          </a>
        </div>
        <div class="menu">
          <div class="New_arrivals wdc-btn active">
            <a id="new-arrivals-link" href="">NEW ARRIVALS</a>
            <div class="dropdown section-2">
              <div class="hour-sub-menu">
                <h3>NEW ARRIVALS</h3>
                <a href="">Desk</a>
                <a href="">Charging Solution</a>
                <a href="">Mackbook Sleeves</a>
                <a href="">Messenger Bags</a>
                <a href="">Eyewear Glasses</a>
                <a href="">Watchbands</a>
              </div>
              <div class="images">
                <a href="">
                  <img src="./images/2020-11-16-074520097.webp" alt="" />
                </a>
                <a href="">
                  <img src="./images/2020-11-16-074520097.webp" alt="" />
                </a>
                <a href="">
                  <img src="./images/2020-11-16-074520097.webp" alt="" />
                </a>
              </div>
            </div>
          </div>
          <div class="cases-sleeves wdc-btn">
            <a id="cases-sleeves-link" href="">CASES & SLEEVES</a>
            <div class="dropdown section-2">
              <div class="hour-sub-menu">
                <h3>CASES</h3>
                <div class="sub-menu">
                  <div>
                    <a href="">APPLE</a>
                    <br />
                    <div class="row-1">
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                    </div>
                  </div>
                  <div>
                    <a href="">SAMSUNG</a>
                    <br />
                    <div class="row-1">
                      <a href="">Galaxy A53 <sup>New</sup></a>
                      <a href="">Galaxy A53 <sup>New</sup></a>
                      <a href="">Galaxy A53 </a>
                      <a href="">Galaxy A53 <sup>New</sup></a>
                      <a href="">Galaxy A53 </a>
                      <a href="">Galaxy A53 </a>
                      <a href="">Galaxy A53 </a>
                      <a href="">Galaxy A53 <sup>New</sup></a>
                    </div>
                  </div>
                  <div>
                    <a href="">APPLE</a>
                    <br />
                    <div class="row-1">
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                    </div>
                  </div>
                  <div>
                    <a href="">APPLE</a>
                    <br />
                    <div class="row-1">
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                    </div>
                  </div>
                </div>
              </div>
              <div class="poster-dopdown">
                <img
                  src="https://images.dailyobjects.com/marche/assets/images/other/airpods-cases-sleeves-page-dropdown-image.jpg?tr=cm-pad_crop,v-2,w-1000,w-207,h-653,dpr-1"
                  alt=""
                />
              </div>
            </div>
          </div>
          <div class="accesories wdc-btn">
            <a id="accessories-link" href="">ACCESORIES</a>
            <div class="dropdown section-2">
              <div class="hour-sub-menu">
                <h3>CASES</h3>
                <div class="sub-menu">
                  <div>
                    <a href="">APPLE</a>
                    <div class="row-1">
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                    </div>
                  </div>
                  <div>
                    <a href="">SAMSUNG</a>
                    <div class="row-1">
                      <a href="">Galaxy A53 <sup>New</sup></a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="sales wdc-btn">
            <a id="sale-link" href="">SALE</a>
            <div class="dropdown section-2">
              <div class="hour-sub-menu">
                <h3>CASES</h3>
                <div class="sub-menu">
                  <div>
                    <a href="">APPLE</a>
                    <div class="row-1">
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                    </div>
                  </div>
                  <div>
                    <a href="">SAMSUNG</a>
                    <div class="row-1">
                      <a href="">Galaxy A53 <sup>New</sup></a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="bags wdc-btn">
            <a id="bags-wallets-link" href="">BAGS & WALLETS</a>
            <div class="drop-bags">
              <div class="row1">
  
              </div>
            </div>
          </div>
          <div class="home-office wdc-btn">
            <a id="home-office-link" href="">HOME OFFICE</a>
            <div class="dropdown section-2">
              <div class="hour-sub-menu">
                <h3>CASES</h3>
                <div class="sub-menu">
                  <div>
                    <a href="">APPLE</a>
                    <div class="row-1">
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                    </div>
                  </div>
                  <div>
                    <a href="">SAMSUNG</a>
                    <div class="row-1">
                      <a href="">Galaxy A53 <sup>New</sup></a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="collections wdc-btn">
            <a id="collections-link" href="">COLLECTION</a>
            <div class="dropdown section-2">
              <div class="hour-sub-menu">
                <h3>CASES</h3>
                <div class="sub-menu">
                  <div>
                    <a href="">APPLE</a>
                    <div class="row-1">
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                    </div>
                  </div>
                  <div>
                    <a href="">SAMSUNG</a>
                    <div class="row-1">
                      <a href="">Galaxy A53 <sup>New</sup></a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="gifting wdc-btn">
            <a href="">GIFTING</a>
            <div class="dropdown section-2">
              <div class="hour-sub-menu">
                <h3>CASES</h3>
                <div class="sub-menu">
                  <div>
                    <a href="">APPLE</a>
                    <div class="row-1">
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                      <a href="">Iphone 13</a>
                      <a href="">Iphone 14</a>
                      <a href="">Iphone 14<sup>New</sup> </a>
                      <a href="">Iphone 12</a>
                    </div>
                  </div>
                  <div>
                    <a href="">SAMSUNG</a>
                    <div class="row-1">
                      <a href="">Galaxy A53 <sup>New</sup></a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="nav-icon">
          <a href="">
            <i class="fa fa-bag-shopping"></i>
          </a>
          <a href="login.html">
            <i class="fa fa-user"></i>
          </a>
          <a href="search.html">
            <i class="fa fa-magnifying-glass"></i>
          </a>
        </div>
      </div>


    <div class="search_bar">
        <div id="search_input">
            <!-- <h5>Search</h5> -->
            <div class="main_search">
                <input type="text" placeholder="Search" id="product_searchBar">
                <i class="fa-solid fa-magnifying-glass" id="seach-icon" onclick="filter()"></i>
            </div> 
        </div>
    </div>
    <div class="sortDiv">
       <button id="lowTohigh" class="button-grow">Low To High</button>
       <button id="highTolow" class="button-grow">High To Low</button>
    </div>
    <div id="search_result_div">

    </div>
</body>
</html>
<script>
    // ............................................search page functionality .....................................................

    const url =  "https://63c788db5c0760f69ab9188f.mockapi.io/products";
    let cartdata=JSON.parse(localStorage.getItem('cart'))||[];
    let icon = document.getElementById("seach-icon");
    let main = document.getElementById("search_result_div");
    let sorting = document.getElementById("sortByprice");
    let lowTohigh = document.getElementById("lowTohigh");
    let highTolow = document.getElementById("highTolow");
    let new_data = []
    let productList = []
    let sortList = []
   
    fetch(url)
    .then(res => res.json())
    .then((data)=>{
        // console.log("data",data);
        
        productList = data.map((item)=>{
           return{
            image: `${item.image}`,
            title:item.title,
            descreption: item.descreption,
            category:item.category,
            price:item.price
           }
        })
        sortList=productList
    })


    
    lowTohigh.addEventListener("click",()=>{
            main.innerHTML=null
           let sortarr = new_data.sort((a,b)=>{
            if(a===b){
                return 0;
            }
            else{
                return +(a.price) < +(b.price) ? -1 : 1;
            }
           })
       
           filterDataclick(sortarr);
        
    });
    highTolow.addEventListener("click",()=>{
            main.innerHTML=null
           let sortarr = new_data.sort((a,b)=>{
            if(a===b){
                return 0;
            }
            else{
                return +(b.price) < +(a.price) ? -1 : 1;
            }
           })
          
           filterDataclick(sortarr);
        
    });

    function filter(){
        let searchValue = document.getElementById("product_searchBar").value;
        main.innerHTML = null;

        new_data = productList.filter((item,ind)=>{
         if(searchValue.toLowerCase() === item.category.toLowerCase()){
             return item.category.trim().toLowerCase().includes(searchValue.trim().toLowerCase())
         }
        })
        filterDataclick(new_data)

    }
    
   
    function filterDataclick(new_data){

        new_data.forEach(ele=>{
           new_data.length++;
            let card_list = document.createElement("div");
            card_list.setAttribute("id","card-list");

            let card = document.createElement("div");
            card.setAttribute("class","productCard")

            let imgdiv=document.createElement("div");
            imgdiv.setAttribute("class","img-div")

            let image = document.createElement("img");
            image.setAttribute("src",ele.image);
            imgdiv.append(image);

            let title = document.createElement("h2");
            title.innerText = ele.title;

            let detail_div=document.createElement("div");
            detail_div.setAttribute("class","detail_div")
            let price = document.createElement("h4");
            price.innerText="Rs. "+ ele.price;

            let descreption = document.createElement("p");
            descreption.innerText = ele.descreption;
            let btn=document.createElement("button");
            btn.setAttribute("class","home-btn")
            btn.innerText="Add To Cart"
            console.log("ele",ele)
            
            // <----------------------experiment------------------------------------------------------------------->
          let flag=false;
          btn.addEventListener("click",(el)=>{
            // console.log("el",el)
            // let cartdata=JSON.parse(localStorage.getItem("cart"))||[];
            for(let i=0;i<cartdata.length;i++){
                // console.log("cartdata[i].title==ele.title",cartdata[i].title,ele.title,cartdata[i].title==ele.title)
              if(cartdata[i].title==ele.title){
                flag=true;
                // break;
              }
            }
            if(flag==true){
                alert("Product is Already Added")
            }
            else{
                cartdata.push({...ele,quantity:1});
               localStorage.setItem("cart",JSON.stringify(cartdata));
             alert("Product Added To Cart");
             
            }

            // cartdata.push({...ele,quantity:1});
            // localStorage.setItem("cart",JSON.stringify(cartdata));
            // alert("Product Added To Cart");
             
           
          })
            detail_div.append(title,price,descreption,btn)
            card.append(imgdiv,detail_div)
            card_list.append(card)
            main.append(card_list);
        });
      }
    

</script>